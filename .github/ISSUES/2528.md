# Pass dependency outputs to a generate provider block

**PLsergent** commented *Apr 13, 2023*

Hi,

I'm trying to use the module dependency feature in order to pass the output to the databricks provider.

```
dependency "azure" {
  config_path = "..//azure"
}

generate "provider" {
  path      = "provider.tf"
  if_exists = "overwrite_terragrunt"
  contents  = <<-EOF
provider "databricks" {
  host                        = "${dependency.azure.outputs.databricks_workspace_url}"
  azure_workspace_resource_id = "${dependency.azure.outputs.databricks_workspace_id}"
}
EOF
}
```

I'm having trouble making this work so I was wondering if that was even possible to do?
<br />
***


**denis256** commented *Apr 13, 2023*

Hi,
will be helpful if will be included error message which appears.

Based on the example from issue, I prepared a simple test case which pass:

```hcl
dependency "azure" {
  config_path = "..//azure"  # provide mock data
}

generate "provider" {
  path      = "provider.tf"
  if_exists = "overwrite_terragrunt"
  contents  = <<-EOF

terraform {
  required_providers {  
    databricks = {                          # added databricks in providers
      source = "databricks/databricks"
    }
    aws = {
      source = "hashicorp/aws"
    }
  }
}


provider "databricks" {
  host                        = "${dependency.azure.outputs.databricks_workspace_url}"
  azure_workspace_resource_id = "${dependency.azure.outputs.databricks_workspace_id}"
}
EOF
}
```

```shell
$ terragrunt run-all apply 
Apply complete!

$ cat provider.tf

# Generated by Terragrunt. Sig: nIlQXj57tbuaRZEa

terraform {
  required_providers {
    databricks = {
      source = "databricks/databricks"
    }
    aws = {
      source = "hashicorp/aws"
    }
  }
}


provider "databricks" {
  host                        = "databricks_workspace_url"
  azure_workspace_resource_id = "databricks_workspace_id"
}

```

Full example in: https://github.com/denis256/terragrunt-tests/tree/master/issue-2528

***

**PLsergent** commented *Apr 13, 2023*

Thanks for your time! So it does work in theory!

I'm currently getting this message:
```
Error: cannot read global init script: cannot configure azure-client-secret auth: cannot get workspace: please set `azure_workspace_resource_id` provider argument. Environment variables used: ARM_CLIENT_SECRET, ARM_CLIENT_ID, ARM_TENANT_ID.
```

I thought that maybe it couldn't read the dependency output for some reason but I'm pretty sure the issue is not related to Terragrunt based on your answer!

Thanks again if you have an idea about my issue I'm listening otherwise I'll continue on my own ðŸ˜„ 
***

